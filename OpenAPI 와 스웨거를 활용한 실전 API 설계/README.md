# OpenAPI 와 스웨거를 활용한 실전 API 설계

- *조시 포널랫, 루카스 로젠스톡 저/오명운 역 | 책만*

## 1장 API 와 OpenAPI 소개

- API 는 각 서비스가 제공할 수 있는 것이 무엇이고, 다른 서비스와 어떻게 상호작용할 수 있는지를 정의한다.
- 'API 설계자'의 역할은 사용자로부터 피드백을 받아서 변경사항에 대해 미리 협의 할 수 있도록 API 를 설계하는 것이다.
- OpenAPI
    - HTTP 기반 API 를 설명하는 방식을 정해놓은 규격이다.
    - YAML 이나 JSON 파일 형식으로 작성된다.
- 어디서부터 REST 이고 어디까지가 HTTP 인지 명확하게 경계를 짓기는 어렵지만, HTTP 는 프로토콜이고 REST 는 API 를 기술하는 한 방식이라고 이해하자.
- 실무 현장에서는 HTTP 기반 API 를 설계할 때 요구사항과 표준 또는 REST 원칙 준수 사이에서 트레이드오프를 고려한 현명한 결정을 내려야 한다.

## 3장 OpenAPI 정의서 첫인상

- OpenAPI 는 YAML 과 JSON 두 가지 모두 지원한다.
- YAML 은 JSON 의 슈퍼세트라서 JSON 이 필요한 곳에서는 JSON 을 사용할 수 있다.

## 4장 스웨거 에디터로 OpenAPI 정의서 작성

- 스웨커 데이터는 OpenAPI 정의서 작성을 도와주는 도구다.
- 작성한 YAML 문서가 OpenAPI 정의서로 인식되려면 가장 먼저 `openapi` 필드가 포함돼 있어야 한다. 사용할 OpenAPI 명세 버전을 openapi 필드 값으로 지정한다.

## 5장 API 응답 기술하기

- nullable 키워드를 사용할 수 있다.
- 모든 스키마는 type 필드를 가지며 기본 JSON 타입인 object, array, string, number, boolean, integer, null 을 값으로 지정할 수있다.
  - integer 는 정수값만 number 는 음수, 소수점이 있는 값도 가능
- type 이 array 인 배열 스키마는 배열 원소를 기술하기 위해 **items** 프로퍼티를 반드시 포함해야 하며, items 의 배열 원소에 대한
스키마를 items 의 값으로 지정한다.
- type 이 number 인 숫자 스키마는 minimum, maximum 필드로 최소/최대값을 지정할 수 있다.
- type 이 string 인 문자열 스키마는 patterns 필드에 정규 표현식을 지정할 수 있다.

## 9장 웹 애플리케이션 설계

- 도메인 모델링은 풀어야 할 문제가 있는 도메인(또는 관심 영역)을 가져와서 컴퓨터 소프트웨어로 구현할 수 있도록 기술하는 과정이다.
- `속성`은 이름처럼 어떤 개념을 설명하는 데이터이고, `행위`는 개념이 할 수 있는 것 또는 사용작 그 개념을 가지고 할 수 있는 것을 의미한다.
- 클래스나 관계형 데이터베이스 테이블은 대부분 내부 처리 과정에 적합한 상세 구현에 가깝다.
- 모델 생성을 위해 팀이 가장 먼저 하는 일은 도메인 모델에 포함될 것 같은 모든 개념을 나열하는 것이다.
- 복잡한 도메인 모델링에 너무 깊게 빠져서 정작 중요한 API 설계를 제대로 다루지 못하면 안 되기 때문이다.
- 사용자 스토리
  - 각 사용자 스토리는 소프트웨어 제품의 사용자 관점에서 작성하며, 소프트웨어 안에서 무언가를 달성하기 위해 해야 하는 활동을 기술한다.
  - 사용자 스토리 템플릿
    - *나는 <역할>로서 <기능>을 할 수 있고, 그 결과 <보상>을 받는다.*
    - *<사전 조건>이 주어지면 나는 <기능>을 할 수 있다.*
- 현실에 존재하는 개념과 도메인 모델에 존재하는 개념 사이에 완벽한 매핑은 존재하지 않는다.

## 10장 OpenAPI 를 사용한 API 설계

- 공통으로 재사용 할 수 있는 스키마는 OpenAPI 의 components 섹션에 정의할 수 있다.
- components 에 정의된 스키마를 $ref 키워드를 사용해 참조할 수 있다.