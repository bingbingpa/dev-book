# CHAPTER 19 예외 던지기에서 값 반환으로

- 오류를 표현하는 특별한 값을 반환하는 것은 위험할 수 있다. 함수를 호출하는 쪽에서도 특별한 값을 반환하는 관습을 알아야하기 때문이다.
  - 그리고 이런 기법을 쓰면 오류를 방지하기 위해 타입 검사에 의존하는 것이 불가능하다.
- 코틀린은 체크 예외를 특별하게 취급하지 않는다.
- 체크 예외가 JVM 의 특성이 아니고 자바 컴파일러의 특성이기 때문에, 코틀린은 상당수의 체크 예외를 무시할 수 있다.
- 참조 투명성이 있으면 프로그램의 행동 방식에 대해 추론하기가 훨씬 더 쉽다.
- 코틀린은 체크 예외를 제공하지 않지만, @Throws 애너테이션을 사용하면 바이트 코드로 생성되는 메서드 시그니처에 예외를 추가해서 자바와 상호 운용할수 있다.
- 코틀린 완벽가이드의 Nothing 타입을 이용해서 예외 처리 하는 부분을 참고해보자.
- 스터디에서는 책에 있는 것처럼 Either, Result 보다는 아래와 같은 시그니처를 추천
  - ~~~ kotlin
    fun jsonParse(string, ((report)->Unit)?):Json?
    ~~~
  - 이렇게 쓰면 아래와 같은 형태로 처리가 가능하다. 에러를 처리하거나 처리하지 않거나 엘비스 연산자로 처리하거나를 모두 할 수 있다.
  - ~~~ kotlin
    jsonParse(string){report->
        에러처리
    }?.let{ 정상이면 널이아니지
        it.xxxx 파싱된 json으로 뭔가하기
    }
    
    jsonParse(string)?.let{ 정상이면 널이아니지
        it.xxxx 파싱된 json으로 뭔가하기
    }
    
    jsonParse(string)?.let{ 정상이면 널이아니지
        it.xxxx 파싱된 json으로 뭔가하기
    } ?: 잘못되었단다
    ~~~
- 코틀린에서 out 은 그 타입보다 아래타입 즉 구상타입을 반환한다.
- 코틀린에서 모든 타입의 상위 타입은 Any? 모든 타입의 하위 타입은 Nothing 이다.