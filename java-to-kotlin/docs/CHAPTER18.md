# CHAPTER 18 열린 클래스에서 봉인된 클래스로

- 자바에서 명사는 클래스와 인터페이스로 표현되고, 동사는 메서드로 표현된다.
- 소프트웨어를 설계할 때 변경을 어떻게 잘 처리하느냐는 항상 어려운 문제이다.
- 봉인된 클래스는 직접적인 하위 클래스가 고정되어 있는 추상 클래스다.
- **컴파일러는 `when 식`이 모든 경우를 검토하는지 검사하지만 `when 문`을 검사하지는 않는다.**
  - when 전체의 값을 사용하지 않을 때 when 이 식이 아니라 문이 된다.
  - when 의 결과를 사용함으로써 컴파일러가 when 식이 모든 경우를 처리하는지 검사하도록 강제할 수 있다. 
  - 심지어 when 이 돌려주는 결과가 Unit 타입이라 할지라도 그렇다.
- 데이터 타입에 적용할 수 있는 연산보다 데이터 타입이 더 자주 변경될 때 객체 지향 다형성이 더 적합하며, 데이터 타입보다 데이터 타입에 적용할 수 있는 연산이 더 자주 변경될 때 봉인된 클래스 계층이 더 적합하다.???
- when 식에서는 봉인된 클래스 계층의 루트로부터 자식 방향으로만 타입캐스트를 하라.
  - 그렇지 않고 정적 타입에서 먼 방향으로 타입을 변환하면 위험하다.
  - 값을 구현하기 위해 사용한 실제 클래스에는 정적 타입에 따라 표현된 제약에 위배되는 연산이 있을 수 있다.
  - **봉인된 클래스 계층은 `다운캐스트`가 목적이고, 다운캐스트를 지원하며, 컴파일러의 완전성 검사에 따라 안전하다는 사실을 알려준다.**