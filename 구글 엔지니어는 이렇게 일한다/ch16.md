# CHAPTER 16 버전 관리와 브랜치 관리

- VCS 시스템에서의 `트렁크` 는 기본 브랜치를 뜻한다.
- 개발 브랜치를 따서 해결하려는 것(제품이 불안정해지는 일 방지)은 온당 신경 써야 하는 문제다. 하지만 테스트, 지속적 통합, 철저한 코드 리뷰와 같은 품질 강화 활동을 더 광범위하게 진행하는 편이 효과가 훨씬 좋다.
- 거대한 개발 브랜치를 병합할 때는 많은 것이 변경된 상태이므로 문제 원인이라고 예상되는 범위를 좁히기가 어렵다. 문제를 분류하고 근본 원인을 파악해내기 어렵고, 수정하기는 더욱 어렵다.
    - 개발 브랜치를 되도록 만들지 말고, 만들더라도 매우 짧게 쓰고 없애야 한다.
    - 오래 묵히지 말고 작업을 작은 증분으로 나눠 정기적으로 트렁크에 커밋해야 한다.
- 다수의 브랜치에서 장기간 독립적으로 개발을 진행했다면 병합 시 엄청난 우여곡절을 겪을 것이고, 병합 후에도 더 많은 위험이 수면 밑에 도사리고 있을 것이다.
- 제품의 릴리스 간격(혹은 릴리스 수명)이 몇 시간 이상이면 릴리스 브랜치를 따로 생성하는 게 좋다. 이 브랜치는 릴리스한 제품과 정확히 같은 코드를 담게 된다.
- 트렁크로부터 하루에도 몇 번씩 릴리스할 수 있는 지속적 배포가 잘 자리 잡은 조직에서는 대체로 릴리스 브랜치를 건너뛴다.
- 같은 코드베이스에서 여러 개의 버전이 공존하는 걸 허용하는 정책은 모두 값비싼 호환성 문제를 품고 있다. 여러 가지 트릭을 동원하여 잠시 동안은 피할 수 있겠지만 결국은 큰 문제로 이어질 확률이 매우 높다.
- 중요한 것은 모노리표냐 아니냐가 아니라 ‘원-버전’ 원칙을 최대한 준수하는 것이다. 즉, 조직에서 이미 사용 중인 라이브러리에 대한 의존성을 추가할 때 개발자가 버전을 ‘선택’하게 해서는 안 된다. 원-버전 규칙에 선택이 끼어들면 필시 병합 전략 논의, 다이아몬드 종속성, 노력 낭비가 뒤따라 온다.