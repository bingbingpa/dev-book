### 9. API 디자인 발전시키기
- 브레이킹 체인지(Breaking change)를 유발하지 않고 API 발전시키기
- 브레이킹 체인지를 관리하기 위해 API 버전 지정하기
- 브레이킹 체인지를 유발하지 않는 확장 가능한 API 디자인하기
- **브레이킹 체인지**: 규격을 바꿔 기존 사용자들이 사용할 수 없게 만드는 변화로
  #### 9.1 API 진화 디자인
    - 출력 데이터에 적용하는 브레이킹 체인지에 따른 결과
      |변경|결과|
      |:---|:---|
      |속성의 이름을 변경|구현에 따라 다름(UI 에서 데이터가 사라짐, 데이터 오염, 충돌, 기타 등등)|
      |속성의 위치 이동|구현에 따라 다름(UI 에서 데이터가 사라짐, 데이터 오염, 충돌, 기타 등등)|
      |필수 속성의 제거|구현에 따라 다름(UI 에서 데이터가 사라짐, 데이터 오염, 충돌, 기타 등등)|
      |필수 속성에서 선택 사항으로 변경|구현에 따라 다름(UI 에서 데이터가 사라짐, 데이터 오염, 충돌, 기타 등등)|
      |속성의 타입 변경|파싱 에러|
      |속성의 포맷 변경|파싱 에러|
      |속성의 특징 변경(길이, 숫자 범위, 배열 요소의 길이 확장)|구현에 따라 다름(UI 에서 데이터가 사라짐, 데이터 오염, 충돌, 기타 등등)|
      |속성의 의미 변경|최악의 결과|
      |enum 값 추가|구현에 따라 다름(UI 에서 데이터가 사라짐, 데이터 오염, 충돌, 기타 등등)|
    - 입력 데이터와 파라미터에서 브레이킹 체인지 회피하기
        - 입력 데이터에 적용하는 브레이킹 체인지에 따른 결과
          |변경|결과|출력 데이터에 적용했을 때와 비교|
          |:---|:---|:---|
          |속성의 이름을 변경|API 에러| 동일|
          |속성의 위치 이동|API 에러| 동일|
          |필수 속성의 제거|API 에러| 동일|
          |선택 사항에서 필수 속성으로 변경|API 에러|반대(필수 속성을 선택 사항으로 변경했을 때와 동일)|
          |속성의 타입 변경|API 에러|동일|
          |속성의 포맷 변경|API 에러|동일|
          |속성의 특징 변경(길이, 숫자 범위, 배열 요소의 길이 축소)|API 에러|반대(특징을 확장한 때와 동일)|
          |속성의 의미 변경|최악의 경우(주로 프로바이더에 영향을 미침)|반대(컨슈머 영역에 영향을 미침)|
          |enum 값 제거|API 에러|반대(값을 추가할 때와 같음)|
          |**필수 속성 추가**|API 에러|에러 발생 안함(브레이킹 체인지강 아님)|
  #### 9.2 API 버전 정하기
  - 시멘틱 버저닝
      - **메이저 숫자**는 브레이킹 체인지가 발생할 때만 올라간다. 예) 필수 파라미터가 추가되는 경우
      - **마이너 숫자**는 새로운 기능이 추가되고 하위 호환성이 유지되는 경우에 올라간다. 예) HTTP 메서드나 리소스 경로가 REST API 에 추가되는 경우
      - **패치 숫자**는 하위 호환이 가능한 버그 수정의 경우에 올라간다.
  - **API 세계에서의 시멘틱 버저닝은 단 두 자리의 숫자로만 구성되어 있다.**(브레이킹, 논브레이킹) 이 숫자들만 가지고도 하위 호환과 하위 호환이 되지 않는 API 의 변경사항을 추적할 수 있기 때문이다.
  - 브레이킹 체인지는 하위 호환이 불가능한 변경을 의미한다. 
  - 쿼리 파라미터를 이용해서 API 버전을 변경하는 것은 API 디자인 관점에서 깔끔하지 않다.
  #### 9.3 API 를 디자인할 때 확장성을 명심하기
  - **REST API 의 리소스들은 반드시 오브젝트라는 봉투에 담겨 확장성을 보장하고 브레이킹 체인지의 위협을 줄여야 한다.**
  - 불리언이 숫자나 문자열보다 확장성이 떨어진다. 상태값을 표현하는 겨우 true, false 이외의 상태값이 필요한 경우에는 확장이 어렵다.
  - API 가 커질수록, 발전의 횟수가 늘어날수록, 당연하게 브레이킹 체인지의 위험도 커진다. 가급적이면 큰 API 를 만드는 대신에, 작은 API 를 여러개 만들도록 하자.